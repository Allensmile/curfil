<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>curfil: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">curfil
   &#160;<span id="projectnumber">..</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">curfil Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>CUDA Random Forests for Image Labeling (CURFIL)</h2>
<p>This project is an open source implementation with NVIDIA CUDA that accelerates random forest training and prediction for image labeling by using the massive parallel computing power offered by GPUs.</p>
<p>CURFIL is the result of Benedikt Waldvogel’s master thesis <a href="http://www.ais.uni-bonn.de/theses/Benedikt_Waldvogel_Master_Thesis_07_2013.pdf">Accelerating Random Forests on CPUs and GPUs for Object-Class Image Segmentation</a> at the University of Bonn, <a href="http://www.ais.uni-bonn.de">Autonomous Intelligent Systems</a>.</p>
<h2>Implemented Visual Features</h2>
<p>We currently focus on image labelling tasks such as image segmentation or classification applications. We implement two types of image features as described in the <a href="https://github.com/deeplearningais/curfil/wiki/Visual-Features">documentation of visual features</a> in more detail.</p>
<h2>Installation</h2>
<h3>Dependencies</h3>
<p>To build the C++ library and the binaries, you will need:</p>
<ul>
<li>cmake (and cmake-curses-gui for easy configuration)</li>
<li><a href="https://github.com/deeplearningais/ndarray">ndarray</a> (included as git submodule)</li>
<li>GCC 4.4 or higher</li>
<li>Boost 1.46 or higher</li>
<li>NVIDIA CUDA™ 5.0 or higher</li>
<li><a href="http://code.google.com/p/thrust/">Thrust</a> - included in CUDA since 4.0</li>
<li><a href="http://hci.iwr.uni-heidelberg.de/vigra/">Vigra Impex</a></li>
<li>Intel TBB</li>
<li><a href="https://github.com/temporaer/MDBQ">MDBQ</a> (optional, required for <a href="https://github.com/jaberg/hyperopt">hyperopt</a> parameter search)</li>
<li>A CUDA capable GPU with compute capability 2.0 or higher</li>
</ul>
<h3>Building</h3>
<div class="fragment"><div class="line">git clone --recursive https:<span class="comment">//github.com/deeplearningais/curfil.git  # --recursive will also init the submodules</span></div>
<div class="line">cd curfil</div>
<div class="line">mkdir -p build</div>
<div class="line">cd build</div>
<div class="line">cmake -DCMAKE_BUILD_TYPE=Release ..  # change to <span class="stringliteral">&#39;Debug&#39;</span> to build the debugging version</div>
<div class="line">ccmake .              # adjust paths to your system (cuda, thrust, ...)!</div>
<div class="line">make -j</div>
<div class="line">ctest                 # run tests to see <span class="keywordflow">if</span> it went well</div>
<div class="line">sudo make install</div>
</div><!-- fragment --><p> Refer to your local Unix expert if you do not know what to do with this instruction.</p>
<h2>Dataset Format</h2>
<p>Training and prediction requires to load a set of images from a dataset. We currently only support datasets that contain RGB-D images, as for example captured by the Microsoft Kinect or the Asus Xtion PRO LIVE. RGB-D images have three channels that encode the color information and one channel for the depth of each pixel. Depth is the distance of the object to the camera. Note that stereo cameras such as the Kinect do not guarantee to deliver a valid depth measure for every pixel in the image. Distance cannot be measured if the object is occluded for one of the two cameras. Missing or invalid distance is either encoded with a zero value or by using the special floating point value <code>NaN</code>.</p>
<p>To load images from disk, we use a similar format as the <a href="http://www.cs.washington.edu/rgbd-dataset/trd5326jglrepxk649ed/rgbd-dataset_full/README.txt">RGB-D object dataset of Kevin Lai et al.</a>.</p>
<p>We expect to find the color image, depth information and the ground truth in three files in the same folder. All images must have the same size. Datasets with varying image sizes must be padded manually. You can specify to skip the padding color when sampling the dataset by using the <code>--ignoreColor</code> parameter.</p>
<p>The filename schema and format is</p>
<ul>
<li><code>name_colors.png</code> A three-channel <code>uint8</code> RGB image where pixels take on values between 0-255</li>
<li><code>name_depth.png</code> A single-channel <code>uint16</code> depth image. Each pixel gives the depth in millimeters, with 0 denoting missing depth. The depth image can be read using MATLAB with the standard function (<a href="http://www.mathworks.de/de/help/matlab/ref/imread.html">imread</a>), and in OpenCV by loading it into an image of type <code>IPL_DEPTH_16U</code>.</li>
<li><code>name_ground_truth.png</code> A three-channel <code>uint8</code> RGB image where pixels take on values between 0-255. Each color represents a different class label. Black indicates "void" or "background".</li>
</ul>
<h2>Usage</h2>
<h3>Training</h3>
<p>Use the binary <code>curfil_train</code>.</p>
<p>The training process produces a random forest consisting of multiple decision trees that are serialized to compressed JSON files, one file per tree.</p>
<p>See the <a href="https://github.com/deeplearningais/curfil/wiki/Training-Parameters">documentation of training parameters</a>.</p>
<h3>Prediction</h3>
<p>Use the binary <code>curfil_predict</code>.</p>
<p>The program reads the trees from the compresses JSON files and performs a dense pixel-wise classification of the specified input images. Prediction is accelerated on GPU and runs in real-time speed even on mobile GPUs such as the NVIDIA GeForce GTX 675M.</p>
<p>Also see <a href="http://github.com/deeplearningais/curfil/wiki/Prediction-Parameters">documentation of prediction parameters</a>.</p>
<h3>Hyperopt Parameter Search</h3>
<p>Use the binary <code>curfil_hyperopt</code>.</p>
<p>This <a href="https://github.com/jaberg/hyperopt">Hyperopt</a> client is only built if <a href="https://github.com/temporaer/MDBQ">MDBQ</a> is installed. The client fetches hyperopt trials (jobs) from a MongoDB database and performs 5-fold cross-validation to evaluate the loss. You can run the hyperopt client in parallel on as many machines as desired.</p>
<p>The trials need to be inserted into the database in advance. We include sample python scripts in <a href="scripts/">scripts/</a>. Note that there is only one <em>new</em> trial in the database at any given point in time. Thus, the python script needs to be running during the entire parameter search.</p>
<p>The procedure:</p>
<ol type="1">
<li>Make sure the MongoDB database is up an running.</li>
<li>Run the python script that inserts new trials. Example: <code>scripts/NYU/hyperopt_search.py</code></li>
<li>Run <code>curfil_hyperopt</code> on as many machine as desired.</li>
</ol>
<p>Also see <a href="http://github.com/deeplearningais/curfil/wiki/Hyperopt-Parameter-Search">documentation of hyperopt parameter search in the wiki</a>.</p>
<h3>As a <code>C++</code> Library</h3>
<p>See <a href="https://github.com/deeplearningais/curfil/wiki/Usage-as-a-Library">the example in the wiki</a>.</p>
<h2>Examples</h2>
<ul>
<li><a href="https://github.com/deeplearningais/curfil/wiki/Training-and-Prediction-with-the-NYU-Depth-v2-Dataset">Training and Prediction with the NYU Depth v2 Dataset</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 21 2014 20:10:14 for curfil by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
